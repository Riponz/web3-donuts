{"version":3,"sources":["vending.js","components/Main.js","App.js","index.js"],"names":["abi","vendingMachineContract","web3","eth","Contract","Main","useState","setError","setSuccessMsg","inventory","setInventory","myDonutCount","setmyDonatCount","buyCount","setbuyCount","web","setweb","address","setaddress","vmContract","setvmContract","purchases","useEffect","getInventoryHandler","getMyDonutCountHandler","a","methods","getVendingMachineBalance","call","donutBalances","count","buyDonutHandler","event","preventDefault","console","log","purchase","send","from","value","utils","toWei","message","connectWalletHandler","window","ethereum","request","method","Web3","getAccounts","account","vm","messsage","className","onClick","onChange","target","type","placeholder","App","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"khBAAMA,EAAM,CAAC,CAAC,OAAS,GAAG,gBAAkB,aAAa,KAAO,eAAe,CAAC,OAAS,CAAC,CAAC,aAAe,UAAU,KAAO,GAAG,KAAO,YAAY,KAAO,gBAAgB,QAAU,CAAC,CAAC,aAAe,UAAU,KAAO,GAAG,KAAO,YAAY,gBAAkB,OAAO,KAAO,YAAY,CAAC,OAAS,GAAG,KAAO,2BAA2B,QAAU,CAAC,CAAC,aAAe,UAAU,KAAO,GAAG,KAAO,YAAY,gBAAkB,OAAO,KAAO,YAAY,CAAC,OAAS,GAAG,KAAO,QAAQ,QAAU,CAAC,CAAC,aAAe,UAAU,KAAO,GAAG,KAAO,YAAY,gBAAkB,OAAO,KAAO,YAAY,CAAC,OAAS,CAAC,CAAC,aAAe,UAAU,KAAO,SAAS,KAAO,YAAY,KAAO,WAAW,QAAU,GAAG,gBAAkB,UAAU,KAAO,YAAY,CAAC,OAAS,CAAC,CAAC,aAAe,UAAU,KAAO,SAAS,KAAO,YAAY,KAAO,UAAU,QAAU,GAAG,gBAAkB,aAAa,KAAO,aASh1BC,EAPgB,SAAAC,GAC3B,OAAO,IAAIA,EAAKC,IAAIC,SAChBJ,EACA,+C,QCgGOK,MA/Ff,WAEI,MAA0BC,mBAAS,IAAnC,mBAAcC,GAAd,WACA,EAAoCD,mBAAS,IAA7C,mBAAmBE,GAAnB,WACA,EAAkCF,mBAAS,IAA3C,mBAAOG,EAAP,KAAkBC,EAAlB,KACA,EAAwCJ,mBAAS,IAAjD,mBAAOK,EAAP,KAAqBC,EAArB,KACA,EAAgCN,mBAAS,IAAzC,mBAAOO,EAAP,KAAiBC,EAAjB,KACA,EAAsBR,mBAAS,MAA/B,mBAAOS,EAAP,KAAYC,EAAZ,KACA,EAA8BV,mBAAS,IAAvC,mBAAOW,EAAP,KAAgBC,EAAhB,KACA,EAAoCZ,mBAAS,MAA7C,mBAAOa,EAAP,KAAmBC,EAAnB,KACA,EAAkCd,mBAAS,GAA3C,mBAAOe,EAAP,UAEAC,qBAAU,WACFH,GAAYI,IACZJ,GAAcF,GAASO,MAC5B,CAACL,EAAYF,EAASI,IAG7B,IAAME,EAAmB,uCAAG,4BAAAE,EAAA,sEACAN,EAAWO,QAAQC,2BAA2BC,OAD9C,OAClBnB,EADkB,OAExBC,EAAaD,GAFW,2CAAH,qDAKnBe,EAAsB,uCAAG,4BAAAC,EAAA,sEACPN,EAAWO,QAAQG,cAAcZ,GAASW,OADnC,OACrBE,EADqB,OAE3BlB,EAAgBkB,GAFW,2CAAH,qDAStBC,EAAe,uCAAG,WAAOC,GAAP,SAAAP,EAAA,6DACpBO,EAAMC,iBADc,SAGfC,QAAQC,IAAI,CAAClB,YAHE,SAIVE,EAAWO,QAAQU,SAASvB,GAAUwB,KAAK,CAC7CC,KAAMrB,EACNsB,MAAOxB,EAAIyB,MAAMC,MAAM,MAAO,SAAW5B,IAN7B,OAQhBL,EAAc,GAAD,OAAIK,EAAJ,uBACZqB,QAAQC,IAAI,cAEThB,GAAYI,IACZJ,GAAcF,GAASO,IAZX,kDAchBjB,EAAS,KAAImC,SAdG,0DAAH,sDAkBfC,EAAoB,uCAAG,gCAAAlB,EAAA,+EAGXmB,OAAOC,SAASC,QAAQ,CAAEC,OAAQ,wBAHvB,cAIX7C,EAAO,IAAI8C,IAAKJ,OAAOC,UAC7B7B,EAAOd,GALU,SAOKA,EAAKC,IAAI8C,cAPd,OAOXC,EAPW,OAQjBhC,EAAWgC,EAAQ,IAClBhB,QAAQC,IAAIlB,GACPkC,EAAKlD,EAAuBc,GAElCK,EAAc+B,GAZG,kDAcjB5C,EAAS,KAAI6C,UAdI,0DAAH,qDAuBtB,OACA,gCACI,8BACA,sBAAKC,UAAU,SAAf,UACI,mBAAGA,UAAU,cAAb,0BACA,wBAAQA,UAAU,aAAaC,QAASX,EAAxC,iCAKJ,sBAAKU,UAAU,OAAf,UACI,sBAAKA,UAAU,iBAAf,2BAA+C5C,KAC/C,sBAAK4C,UAAU,iBAAf,qCAAyD1C,KACzD,uBAAM0C,UAAU,WAAhB,UACI,uBAAOA,UAAU,iBAAiBE,SA3D3B,SAAAvB,GACnBlB,EAAYkB,EAAMwB,OAAOjB,QA0D+CkB,KAAK,OAAOC,YAAY,wBACpF,wBAAQL,UAAU,eAAeC,QAASvB,EAAiB0B,KAAK,SAAhE,2BCnFDE,MARf,WACE,OACE,qBAAKN,UAAU,OAAf,SACA,cAAC,EAAD,OCDSO,IAASC,WAAWC,SAASC,eAAe,SACpDC,OACH,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,S","file":"static/js/main.1282264c.chunk.js","sourcesContent":["const abi = [{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"donutBalances\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getVendingMachineBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"purchase\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"restock\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]\r\n\r\nconst vendingMachineContract = web3 => {\r\n    return new web3.eth.Contract(\r\n        abi, \r\n        \"0x804Fa0A0F2d5E6b293bE739e61118e8A72Cce5B1\"\r\n    )\r\n}\r\n\r\nexport default vendingMachineContract;","import React from 'react'\r\nimport { useState, useEffect } from \"react\";\r\nimport \"./Styles.css\"\r\nimport Web3 from \"web3\"\r\nimport vendingMachineContract from \"../vending\"\r\n\r\nfunction Main() {\r\n\r\n    const [error, setError] = useState('')\r\n    const [successMsg, setSuccessMsg] = useState('')\r\n    const [inventory, setInventory] = useState('')\r\n    const [myDonutCount, setmyDonatCount] = useState('')\r\n    const [buyCount, setbuyCount] = useState('')\r\n    const [web, setweb] = useState(null)\r\n    const [address, setaddress] = useState(\"\")\r\n    const [vmContract, setvmContract] = useState(null)\r\n    const [purchases, setPurchases] = useState(0)\r\n\r\n    useEffect(() => {\r\n        if (vmContract) getInventoryHandler()\r\n        if (vmContract && address) getMyDonutCountHandler()\r\n    }, [vmContract, address, purchases])\r\n\r\n\r\nconst getInventoryHandler = async () => {\r\n    const inventory = await vmContract.methods.getVendingMachineBalance().call()\r\n    setInventory(inventory)\r\n}\r\n\r\nconst getMyDonutCountHandler = async () => {\r\n    const count = await vmContract.methods.donutBalances(address).call()\r\n    setmyDonatCount(count)\r\n}\r\n\r\nconst updateDonutQty = event => {\r\n    setbuyCount(event.target.value)\r\n}\r\n\r\nconst buyDonutHandler = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n        {console.log({address})}\r\n        await vmContract.methods.purchase(buyCount).send({\r\n            from: address,\r\n            value: web.utils.toWei('0.1', 'ether') * buyCount,\r\n        })\r\n        setSuccessMsg(`${buyCount} donuts purchased!`)\r\n        {console.log(\"successMsg\")}\r\n\r\n        if (vmContract) getInventoryHandler()\r\n        if (vmContract && address) getMyDonutCountHandler()\r\n    } catch(err) {\r\n        setError(err.message)\r\n    }\r\n}\r\n \r\nconst connectWalletHandler = async () => {\r\n    // if (typeof window !== \"undefined\" && typeof window.ethereum !== \"undefined\") {\r\n        try {\r\n            await window.ethereum.request({ method: \"eth_requestAccounts\" })\r\n            const web3 = new Web3(window.ethereum)\r\n            setweb(web3)\r\n\r\n            const account = await web3.eth.getAccounts()\r\n            setaddress(account[0])\r\n            {console.log(address)}\r\n            const vm = vendingMachineContract(web)\r\n            \r\n            setvmContract(vm)\r\n        } catch (err) {\r\n            setError(err.messsage)\r\n        }\r\n    // } else {\r\n    //     console.log(\"Please install MetaMask\")\r\n    // }\r\n}\r\n\r\n    \r\n// \r\n    return (\r\n    <div>\r\n        <div>\r\n        <nav className='navbar' >\r\n            <p className='navbar_logo' >Rypto-Donuts</p>\r\n            <button className='navbar_btn' onClick={connectWalletHandler}>\r\n                            Connect Wallet\r\n                        </button>\r\n        </nav>\r\n    </div>\r\n        <div className='main'>\r\n            <div className='main_inventory'>Donuts Left = {inventory}</div>\r\n            <div className='main_owninvent'>Donuts in own account = {myDonutCount}</div>\r\n            <form className='purchase'>\r\n                <input className='purchase_input' onChange={updateDonutQty} type=\"text\" placeholder=\"Enter your quantity\" />\r\n                <button className='purchase_btn' onClick={buyDonutHandler} type=\"submit\">Buy</button>\r\n            </form>\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Main\r\n","import './App.css';\nimport Main from './components/Main';\n\nfunction App() {\n  return (\n    <div className='body'>\n    <Main />\n    </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"sourceRoot":""}